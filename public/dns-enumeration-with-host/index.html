<!DOCTYPE html>
<html lang="en">

  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <meta name="author" content="Gwendal Le Coguic">
    <meta name="description" content="Gwendal Le Coguic, web developer and bug hunter">
    <meta name="keywords" content="development,security,researcher,bugbounty,tools,php,python">

    <meta name="twitter:card" content="summary_large_image"/>
<meta name="twitter:image" content="http://10degres.net/assets/img/header-background.jpg"/>

<meta name="twitter:title" content="DNS enumeration with Host"/>
<meta name="twitter:description" content="While performing a pentest the information gathering phase is the most important, it&rsquo;s the key of a successful test.
The DNS is very great source of informations, whith some simple queries you will be able to grab usefull datas about the domain you are targeting.
The host command is a very powerful DNS lookup utility which is present in all Linux distribution.
For the examples, I will use a domain which allows that kind of query at this moment.
Basic usage
As the man says, host is normally used to convert names to IP addresses and vice versa:

If the domain doesn&rsquo;t exist, you will meet that message: Host pmolkijn.de not found: 3(NXDOMAIN)
If the ip doesn&rsquo;t point anywhere, you will get this message: Host 91.121.139.2 not found: 3(NXDOMAIN)"/>
<meta name="twitter:site" content="@10degres"/>
<meta name="twitter:creator" content="@gwendallecoguic"/>

    <meta property="og:title" content="DNS enumeration with Host" />
<meta property="og:description" content="While performing a pentest the information gathering phase is the most important, it&rsquo;s the key of a successful test.
The DNS is very great source of informations, whith some simple queries you will be able to grab usefull datas about the domain you are targeting.
The host command is a very powerful DNS lookup utility which is present in all Linux distribution.
For the examples, I will use a domain which allows that kind of query at this moment.
Basic usage
As the man says, host is normally used to convert names to IP addresses and vice versa:

If the domain doesn&rsquo;t exist, you will meet that message: Host pmolkijn.de not found: 3(NXDOMAIN)
If the ip doesn&rsquo;t point anywhere, you will get this message: Host 91.121.139.2 not found: 3(NXDOMAIN)" />
<meta property="og:type" content="article" />
<meta property="og:url" content="http://10degres.net/dns-enumeration-with-host/" />

<meta property="og:image" content="http://10degres.net/assets/img/header-background.jpg" />
<meta property="article:published_time" content="2015-02-27T00:00:00+00:00" />
<meta property="article:modified_time" content="2015-02-27T00:00:00+00:00" /><meta property="og:site_name" content="10degres" />


    
      <base href="http://10degres.net/dns-enumeration-with-host/">
    
    <title>
  DNS enumeration with Host · 10degres
</title>

    
      <link rel="canonical" href="http://10degres.net/dns-enumeration-with-host/">
    

    <link href="https://fonts.googleapis.com/css?family=Lato:400,700%7CMerriweather:300,700%7CSource+Code+Pro:400,700" rel="stylesheet">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/normalize/8.0.1/normalize.min.css" integrity="sha256-l85OmPOjvil/SOvVt3HnSSjzF1TUMyT9eV0c2BzEGzU=" crossorigin="anonymous" />

    
      
      
      <link rel="stylesheet" href="http://10degres.net/assets/css/coder.min.3d8325016df2bf0f0e874e28c83131f668a953cb3245cf9391fae4ff5b76b2ed.css" integrity="sha256-PYMlAW3yvw8Oh04oyDEx9mipU8syRc&#43;Tkfrk/1t2su0=" crossorigin="anonymous" media="screen" />
    

    

    

    
      <link rel="stylesheet" href="http://10degres.net/assets/css/custom.css" />
    

    <link rel="icon" type="image/png" href="http://10degres.net/assets/img/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png" href="http://10degres.net/assets/img/favicon-16x16.png" sizes="16x16">

    <meta name="generator" content="Hugo 0.91.0" />
  </head>

  <body class=" ">
    <main class="wrapper">
      <nav class="navigation">
  <section class="container">
    <a class="navigation-title" href="http://10degres.net/">
      10degres
    </a>
    <input type="checkbox" id="menu-toggle" />
    <label class="menu-button float-right" for="menu-toggle"><i class="fas fa-bars">aaa</i></label>
    <ul class="navigation-list">
      
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://10degres.net/posts/">Blog</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://10degres.net/cves/">CVEs</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://10degres.net/services/">Services</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://10degres.net/press/">Press</a>
          </li>
        
          <li class="navigation-item">
            <a class="navigation-link" href="http://10degres.net/about/">About</a>
          </li>
        
      
      
    </ul>
  </section>
</nav>


      <div class="content">
        
  <section class="container post">
    <article>
      <header>
        <div class="post-title">
          <h1 class="title">DNS enumeration with Host</h1>
        </div>
        <div class="post-meta">
          <div class="date">
            <span class="posted-on">
              <i class="fas fa-calendar"></i>
              <time datetime='2015-02-27T00:00:00Z'>
                February 27, 2015
              </time>
            </span>
            <span class="reading-time">
              <i class="fas fa-clock"></i>
              2 minutes read
            </span>
          </div>
          
          <div class="tags">
  <i class="fas fa-tag"></i>
    <a href="http://10degres.net/tags/pentest/">pentest</a>
      <span class="separator">•</span>
    <a href="http://10degres.net/tags/information-gathering/">information gathering</a>
      <span class="separator">•</span>
    <a href="http://10degres.net/tags/dns/">dns</a></div>

        </div>
      </header>

      <div>
        <p>While performing a pentest the information gathering phase is the most important, it&rsquo;s the key of a successful test.
The DNS is very great source of informations, whith some simple queries you will be able to grab usefull datas about the domain you are targeting.
The <code>host</code> command is a very powerful DNS lookup utility which is present in all Linux distribution.</p>
<p>For the examples, I will use a domain which allows that kind of query at this moment.</p>
<h2 id="basic-usage">Basic usage</h2>
<p>As the <code>man</code> says, <code>host</code> is normally used to convert names to IP addresses and vice versa:</p>
<p><img src="http://10degres.net/images/dns-enumeration-host-basic.png" alt="DNS enumeration host basic"></p>
<p>If the domain doesn&rsquo;t exist, you will meet that message: <code>Host pmolkijn.de not found: 3(NXDOMAIN)</code></p>
<p>If the ip doesn&rsquo;t point anywhere, you will get this message: <code>Host 91.121.139.2 not found: 3(NXDOMAIN)</code></p>
<h2 id="forward">Forward</h2>
<p>From here you can perform a brute force based on a dictionnary to find subdomains.
Imagine a text file containing those few keywords:</p>
<p>mail, demo, test, admin, blog</p>
<p>With 3 lines of shell code, you could loop to query all derived subdomains:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">for</span> name in <span style="color:#66d9ef">$(</span>cat subdomains.txt<span style="color:#66d9ef">)</span> ; <span style="color:#66d9ef">do</span>
  host $name.leparisien.fr |grep <span style="color:#e6db74">&#34;has address&#34;</span> |cut -d <span style="color:#e6db74">&#34; &#34;</span> -f 1,4
<span style="color:#66d9ef">done</span>
</code></pre></div><p>Will output:</p>
<p><img src="http://10degres.net/images/dns-enumeration-host-forward.png" alt="DNS enumeration host forward"></p>
<h2 id="reverse">Reverse</h2>
<p>Of course you could query the discovered ip address but you can also query all ip in the same network to find more subdomains. Here is a simple shell script:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-bash" data-lang="bash"><span style="color:#75715e">#!/bin/bash
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">for</span> ip in <span style="color:#66d9ef">$(</span>seq <span style="color:#ae81ff">0</span> 254<span style="color:#66d9ef">)</span> ; <span style="color:#66d9ef">do</span>
  host 160.92.126.$ip |grep <span style="color:#e6db74">&#34;leparisien.fr&#34;</span> |cut -d <span style="color:#e6db74">&#34; &#34;</span> -f 1,5
<span style="color:#66d9ef">done</span>
</code></pre></div><p>Will output:</p>
<p><img src="http://10degres.net/images/dns-enumeration-host-reverse.png" alt="DNS enumeration host reverse"></p>
<h2 id="zone-transfer">Zone transfer</h2>
<p>Finally the best technique is to try a zone transfer.
Zone transfer is a mechanism available for administrators to replicate DNS databases across a set of DNS servers.</p>
<p>With the <code>-t</code> option you can grab specific informations about the domain: name server (ns), exchange mail (mx), alias (cname), etc.:</p>
<p><img src="http://10degres.net/images/dns-enumeration-host-zone-transfer-1.png" alt="DNS enumeration host zone transfer"></p>
<p>Then, for each name server found we will try to perform a zone transfer for the domain of the example:</p>
<p><img src="http://10degres.net/images/dns-enumeration-host-zone-transfer-2.png" alt="DNS enumeration host zone transfer"></p>
<p>Et voilà! My screen is to small but more than 100 unique subdomains have been found.
If the zone transfer fails, you will get this message: <code>; Transfer failed.</code></p>
<p>There is many tools to deal with DNS: <code>dig</code>, <code>dnsenum</code>, <code>dnsrecon</code> can also do the trick.
My favorite and probably the easiest is <a href="http://ha.ckers.org/fierce/" title="Fierce">Fierce</a>.</p>
<h2 id="external-resources">External resources</h2>
<ul>
<li><a href="http://en.wikipedia.org/wiki/DNS_zone_transfer">Zone transfer on Wikipedia</a></li>
</ul>
      </div>

      <footer>
        


      </footer>
    </article>

    
  </section>

      </div>

      <footer class="footer">
  <section class="container">
    
    
    
    
  </section>
</footer>

    </main>

    
<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-61485350-1', 'auto');
	
	ga('send', 'pageview');
}
</script>

    
      <script src="http://10degres.net/assets/js/scripts.js"></script>
    

  </body>

</html>
